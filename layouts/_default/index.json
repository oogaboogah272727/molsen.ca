[
{{- $essays := where .Site.RegularPages "Section" "writing" -}}
{{- $first := true -}}
{{- range $essays -}}
{{- if not .Params.hidden -}}
{{- if not $first }},{{ end -}}
{{- $first = false }}
{
  "title": {{ .Title | jsonify }},
  "url": {{ .RelPermalink | jsonify }},
  "description": {{ .Params.description | jsonify }},
  "type": {{ .Params.type | default "essay" | jsonify }},
  "tags": {{ .Params.tags | default (slice) | jsonify }},
  "date": {{ .Date.Format "2006-01-02" | jsonify }},
  "content": {{ .Plain | truncate 500 | jsonify }}
}
{{- end -}}
{{- end }}
]
